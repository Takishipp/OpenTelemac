<?xml version="1.0"?> 
<!-- Validation and verification of python scripts
--> 
<validation xref="save1d"> 
 
<!-- Extras and Meta Data ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~ 
   /!\ This section is being ignored at the moment --> 
   <deco xref="default"> 
      <look format="png" colourbar="jet.xml" /> 
      <data title="Sub-critical flow over a bump" author="S.E.Bourban" contact="s.bourban@hrwallingford.com" /> 
   </deco> 
   <deco xref="vect"> 
      <look colour="jet.xml" /> 
   </deco> 
   <deco xref="line"> 
      <look colour="k" /> 
   </deco> 
   
<!-- Extract from SELAFIN files ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
   -->
   <!-- Save 2 time histories into the CSV file "figure1.csv".
      - Locations: extraction at node 703 and at point (0,1)
      - Variables: extraction of SURFACE LIBRE
      - Duration:  extraction from time start (0) to end of time (-1)
      - File:      extraction from file "f2d_bumpflu.slf"
   -->
   <save1d xref="figure1" type="history" config="oneofall" time="[0:-1]" deco="default" > 
      <layer vars="surface libre:line" extract="703;(0;1)" target="f2d_bumpflu.slf" /> 
   </save1d>
   <!-- Save a profile along a line into the CSV file "figure2.csv".
      - Locations: extraction along the line defined by the 2 points (0;0.93) and (21;1.07)
      - Variables: extraction of SURFACE LIBRE, FOND and VITESSE
      - Snapshots: extraction at end of time (-1)
      - File:      extraction from file "f2d_bumpflu.slf"
      - TODO:  deal with several variables of name VITESSE with a calculation action
      - NOTE:  the key extract, can also be moved up a level to the tag saved1d
   -->
   <save1d xref="figure2" type="v-section" config="oneofall" time="[-1]" > 
      <layer vars="surface libre:line;fond:line" extract="(0;0.93):(21;1.07)" target="f2d_bumpflu.slf" /> 
      <layer vars="vitesse:line" extract="(0;0.93):(21;1.07)" target="f2d_bumpflu.slf" /> 
   </save1d>

<!-- Plot from SELAFIN file ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
   -->
   <!-- Plot 2 time histories into the PNG file "figure1.png".
      - Same as figure1 above
   -->
   <plot1d xref="figure1" type="history" config="oneofall" time="[0:-1]" deco="default" > 
      <layer vars="surface libre:line" extract="703;(0;1)" target="f2d_bumpflu.slf" /> 
   </plot1d>
   <!-- Plot a profile along a line into the PNG file "figure2.png".
      - Same as figure2 above, except for velocity
   -->
   <plot1d xref="figure2" type="v-section" extract="(0;0.93):(21;1.07)" config="oneofall" time="[-1]" > 
      <layer vars="surface libre:line;fond:line" target="f2d_bumpflu.slf" /> 
   </plot1d>

<!-- Extract from CSV files ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
   -->
   <!-- Copy time history including "703" into the CSV file "figure3.csv".
      - File:      extraction from file "figure1.csv"
      - TODO:  deal with subset of time range
   -->
   <save1d xref="figure3" type="history" config="oneofall" deco="default" > 
      <layer vars="703:line" target="figure1.csv" /> 
   </save1d>
   <plot1d xref="figure3" type="history" config="oneofall" deco="default" > 
      <layer vars="703:line" target="figure1.csv" /> 
   </plot1d>
   <!-- Copy v-section including "LIBRE" into the CSV file "figure4.csv".
      - File:      extraction from file "figure2.csv"
      - TODO:  deal with subset of time range
   -->
   <save1d xref="figure4" type="v-section" config="oneofall" deco="default" > 
      <layer vars="LIBRE:line" target="figure2.csv" /> 
   </save1d>
   <plot1d xref="figure4" type="v-section" config="oneofall" deco="default" > 
      <layer vars="LIBRE:line" target="figure2.csv" /> 
   </plot1d>

<!-- End of Validation ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
   -->
</validation>
